<!DOCTYPE html>

<html>

<head>
    <style>
        /*  your css code here. If applicable */
*{
	box-sizing:border-box;
	margin:0;
	padding:0;
	font-family:Arial;
}

#app{
	position:relative;
	height:100vh;
	width:100vw;
}



.vid-container{
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
	z-index:1
}

video{
	width:100%;
	height:100%;
	object-fit:cover
}

.time-display{
	font-size:3rem;
	font-weight:200;
	color:white;
}


.player-container{
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
	z-index:2;
	display:flex;
	justify-content:space-between;
	align-items:center;
}

#time-select{
	display:flex;
	flex-direction:column;
	gap:3rem;

}

button{
	font-size:1rem;
	padding:0.8rem;
	background:transparent;
	color:white;
	border:2px solid white;
	
	
}

.player-control{
	display:flex;
	flex-direction:column;
	justify-content:center;
	align-items:center;
	gap:2rem
}

.play{
	height:150px;
	width:150px;
	font-size:5rem;
	padding-left:0.5rem;
	border-radius:50%;
	background-color:transparent;
	border:7px solid white;
	font-weight:900;
}

.sound-picker{
	display:flex;
	flex-direction:column;
	gap:3rem;
	
}

.sound-picker > button{
	height:70px;
	width:70px;
	border-radius:50%;
	color:white;
	border:none;
}

.sound-picker > button:first-child{
	background-color:blue;


}

.sound-picker > button:last-child{
	background-color:red;

}
    </style>
</head>

<body>

	<div id="app">

		<div class="vid-container" style='background-color:grey'>
			<video muted loop id="meditation-video">
				<source src="https://cdn.pixabay.com/video/2016/08/12/4382-178617337_large.mp4">
			</video>

			<audio controls></audio>
		</div>

		<div class="player-container">

		<div id="time-select">
			<button id="smaller-mins">2 Minutes</button>
			<button id="medium-mins">5 Minutes</button>
			<button id="long-mins">10 Minutes</button>
			
		</div>

			<div class="player-control">

				<button class="play"> ►
				</button>
				<h3 class="time-display"></h3>
				
			</div>

			
			<div class="sound-picker">
				<button id="beach-sound">Beach</button>
				<button id="rain-sound">Rain</button>
		</div>

		
	</div>


	
	<!-- the entire body must be written by student -->
    <script>let timer;
        const playButton = document.querySelector('.play');
        let currentTime = 600;
        let selectedTime= 600;
        const timeDisplay = document.querySelector('.time-display');
        const video = document.querySelector('#meditation-video')
        let isPlaying = false;
        const timeButtons = document.querySelectorAll('#time-select button');
        
        
        function togglePlay(){
            if(isPlaying){
                pauseMeditation();
            } else {
                startMeditation();
            }
        }
        
        function pauseMeditation(){
            isPlaying = false;
            playButton.textContent = '►';
            clearInterval(timer);
        }
        
        function updateTime(){
            const minutes = Math.floor(currentTime/60);
            const seconds = currentTime % 60;
            timeDisplay.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function startMeditation(){
            // Prevent multiple timers
            if(timer) clearInterval(timer);
            
            isPlaying = true;
            playButton.textContent = '||';
            
            timer = setInterval(() => {
                currentTime--;
                updateTime();
        
                if(currentTime <= 0){
                    stopMeditation();
                    alert("Meditation Complete!");
                }
            }, 1000);
        }
        
        function stopMeditation(){
            isPlaying = false;
            playButton.textContent = '►';
            clearInterval(timer);
            currentTime = selectedTime; 
            updateTime(); // Update display with reset time
        }
        
        function switchVideo(videoType, buttonElement){
            if(videoType=='beach') video.src="https://cdn.pixabay.com/video/2023/04/28/160767-822213540_large.mp4"
            else video.src="https://cdn.pixabay.com/video/2017/08/30/11722-231759069_large.mp4"
        }
        
        document.addEventListener('DOMContentLoaded', function(){
            playButton.addEventListener('click', togglePlay);
            updateTime(); 
        
            function setTime(minutes, buttonElement){
                if(!isPlaying){
                    selectedTime = minutes*60;
                    currentTime=selectedTime || 600;
                    updateTime();
                }
            }
        
            //Time buttons
            document.querySelector('#smaller-mins').addEventListener('click', function(){
                setTime(2, this);
            })
            document.querySelector('#medium-mins').addEventListener('click', function(){
                setTime(5, this);
            })
            document.querySelector('#long-mins').addEventListener('click', function(){
                setTime(10, this);
            })
        
            document.querySelector('#beach-sound').addEventListener('click', function(){
                switchVideo('beach', this)
        
            })
        
            document.querySelector('#rain-sound').addEventListener('click', function(){
                switchVideo('rain', this)
            })
        });
        
</script>

</body>

</html>
